services:
  navidrome:
    image: deluan/navidrome:0.59.0
    container_name: navidrome
    user: 1000:1000 # should be owner of volumes
    restart: unless-stopped
    environment: []
      # Optional: put your config options customization here. Examples:
      # ND_LOGLEVEL: debug
    networks:
      internal:
      traefik_global:
    volumes:
      - /docker_data/navidrome/volumes/data:/data
      - /docker_data/navidrome/volumes/music:/music:ro

  slskd:
    image: slskd/slskd
    container_name: slskd
    user: 1000:1000 # should be owner of volumes
    environment:
      - SLSKD_REMOTE_CONFIGURATION=true
    volumes:
      - /docker_data/navidrome/volumes/slskd_data:/app
      - /docker_data/navidrome/volumes/music:/music
      - /docker_data/navidrome/configs/slskd.yml:/app/slskd.yml
    restart: unless-stopped
    ports:
      - 50300:50300
    networks:
      internal:
      traefik_global:

  file-browser:
    image: gtstef/filebrowser:1.1.6-beta-slim
    environment:
      FILEBROWSER_CONFIG: "./config.yaml"
      FILEBROWSER_ADMIN_PASSWORD: "${FILEBROWSER_ADMIN_PASSWORD}"
    user: 1000:1000
    volumes:
      - /docker_data/navidrome/volumes/music:/music
      - /docker_data/navidrome/volumes/filebrowser_data:/home/filebrowser/data
      - ./filebrowser/config.yaml:/home/filebrowser/config.yaml
    networks:
      internal:
      traefik_global:
    restart: unless-stopped
  
  beets:
    image: ghcr.io/linuxserver/beets:latest
    container_name: beets
    command: ["sleep", "infinity"]
    volumes:
      - ./beets/config.yaml:/config/config.yaml
      - /docker_data/navidrome/volumes/beets_config:/config
      - /docker_data/navidrome/volumes/music:/music
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
    stdin_open: true
    tty: true

networks:
  internal:
  traefik_global:
    external: true